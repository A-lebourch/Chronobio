game_data = {
    "day": 0,
    "greenhouse_gas": 0,
    "events": [],
    "farms": [
        {
            "blocked": False,
            "name": "user",
            "money": 100030,
            "score": 100030,
            "fields": [
                {
                    "content": "PATATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD1",
                },
                {
                    "content": "PATATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD2",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD3",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD4",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "PATATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD1",
                },
                {
                    "content": "PATATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD2",
                },
                {
                    "content": "OIGNON",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD3",
                },
                {
                    "content": "OIGNON",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD4",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD1",
                },
                {
                    "content": "PATATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD2",
                },
                {
                    "content": "COURGETTE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD3",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD4",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "OIGNON",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD1",
                },
                {
                    "content": "POIREAU",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD2",
                },
                {
                    "content": "POIREAU",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD3",
                },
                {
                    "content": "COURGETTE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD4",
                },
                {
                    "content": "TOMATE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
    ],
}

game_data2 = {
    "day": 76,
    "greenhouse_gas": 15200,
    "events": [],
    "farms": [
        {
            "blocked": False,
            "name": "user",
            "money": 102773,
            "score": 1940,
            "fields": [
                {
                    "content": "POTATO",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD1",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": True,
                    "location": "FIELD2",
                },
                {
                    "content": "POTATO",
                    "needed_water": 10,
                    "bought": True,
                    "location": "FIELD3",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD4",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD5",
                },
            ],
            "tractors": [{"location": "FARM", "id": 1}, {"location": "FARM", "id": 2}],
            "loans": [{"amount": 100000, "start_day": 0}],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 2,
                    "LEEK": 0,
                    "TOMATO": 3,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [
                {"id": 1, "location": "FIELD3", "tractor": None, "salary": 1021},
                {"id": 2, "location": "FARM", "tractor": None, "salary": 1021},
            ],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD1",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD2",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD3",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD4",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD1",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD2",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD3",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD4",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
        {
            "blocked": True,
            "name": "",
            "money": 100000,
            "score": 100000,
            "fields": [
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD1",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD2",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD3",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD4",
                },
                {
                    "content": "NONE",
                    "needed_water": 0,
                    "bought": False,
                    "location": "FIELD5",
                },
            ],
            "tractors": [],
            "loans": [],
            "soup_factory": {
                "days_off": 0,
                "stock": {
                    "POTATO": 0,
                    "LEEK": 0,
                    "TOMATO": 0,
                    "ONION": 0,
                    "ZUCCHINI": 0,
                },
            },
            "employees": [],
            "events": [],
        },
    ],
}


def priorité_plantation():
    quantity = {"PATATE": 0, "POIREAU": 0, "TOMATE": 0, "OIGNON": 0, "COURGETTE": 0}
    for keys in game_data:
        count = []
        for i in range(len(game_data["farms"]) - 1):
            for field in range(len(game_data["farms"][i]["fields"]) - 1):
                if game_data["farms"][i]["fields"][field]["bought"] is True:
                    count.append(game_data["farms"][i]["fields"][field]["content"])

    for key in quantity.keys():
        quantity[key] = count.count(key)

    quantity = dict(sorted(quantity.items(), key=lambda item: item[1]))
    quantity = list(quantity.keys())
    return quantity


def observateur(username):
    actions = {"plant": [], "water": [], "harvest": []}
    for farm in range(len(game_data["farms"])):
        if game_data["farms"][farm]["name"] == username:
            my_farm = game_data["farms"][farm]["fields"]
            for field in range(len(my_farm)):
                if (
                    my_farm[field]["bought"]
                    and my_farm[field]["needed_water"] != 0
                    and my_farm[field]["content"] != "NONE"
                ):
                    print("need water at " + my_farm[field]["location"])
                    actions["water"].append(my_farm[field]["location"])

                if (
                    my_farm[field]["bought"]
                    and my_farm[field]["needed_water"] == 0
                    and my_farm[field]["content"] != "NONE"
                ):
                    print("need to be harvested at " + my_farm[field]["location"])
                    actions["harvest"].append(my_farm[field]["location"])

                if my_farm[field]["bought"] and my_farm[field]["content"] == "NONE":
                    print("need to be planted at " + my_farm[field]["location"])
                    actions["plant"].append(my_farm[field]["location"])
    return actions


def can_make_soup(username):
    stock = 0
    for farm in range(len(game_data["farms"])):
        if game_data["farms"][farm]["name"] == username:
            soup_factory = game_data["farms"][farm]["soup_factory"]["stock"]
            for vegies in soup_factory:
                if soup_factory[vegies] >= 1:
                    stock += 1

    if stock == 2 or stock >= 4:
        return True

    else:
        return False


def gestion_employés(game_data, username):
    orders = observateur(game_data, username)
    for farm in range(len(game_data["farms"])):
        if game_data["farms"][farm]["name"] == username:
            my_emplyees = game_data["farms"][farm]["employees"]
            for employee in my_emplyees:
                for order in orders.values():
                    print(employee["location"])
                    print(order)

    return


def watch_money(game_data):
    pass


if __name__ == "__main__":

    print(priorité_plantation(game_data))

    print(observateur(game_data2, "user"))

    print(can_make_soup(game_data2, "user"))

    gestion_employés(game_data2, "user")
